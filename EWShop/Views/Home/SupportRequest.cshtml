@model EWShop.Models.SupportRequest
@{
    ViewBag.Title = "Liên hệ - Góp ý - Hỗ trợ kỹ thuật";
    Layout = "~/Views/Layout/_LayoutCustomerDashboard.cshtml";
}
@section Styles {
    <style>
        textarea { resize: vertical; }
        .table {
            width: 100%;
            margin-bottom: 0 !important;
        }

        .block-heading {
            margin: 30px 0 15px;
        }

        .block-heading h2 {
            font-size: 35px;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .dv-content {
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            text-align: left;
        }

        .container-form {
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
        }

        .dvError {
            float: left;
            width: 100%;
            text-align: center;
        }

        .dvCustomerInfo, .dvProductInfo {
            float: left;
            width: 50%;
            padding: 5px 10px;
        }

        .table > tbody > tr > td {
            border: 0px !important;
            padding: 5px;
        }

        .col-label {
            width: 120px;
            padding: 10px 5px !important;
        }

        .required {
            color: red;
            margin-left: 1px;
        }
        .p-title{
            font-weight: 600;
            font-size: 18px;
        }
        .p-label{
            margin-left: 20px;
            font-size: 18px;
        }
        .p-sub{
            font-size: 15px;
        }
        .form-control {
            height: calc(1.2em + .75rem + 2px);
            padding: 7px;
            font-size: 17px;
        }
        .table td, .table th
        {
            padding: 5px;
            vertical-align: middle;
        }
        .btn {
            padding: 5px 15px;
            font-size: 15px;
            border: 1px solid #ddd;
        }
        .about .about-header{
            margin-top: 20px;
        }
        .about .about-header h2{
            font-size: 40px;
            text-align: center;
            font-weight: 600;
        }
        @@media only screen and (max-width : 750px) {
            .dvCustomerInfo, .dvProductInfo {
                width: 100%;
                padding: 0 10px;
            }

            .block-heading h2 {
                font-size: 24px;
                line-height: 1.3;
            }
        }
    </style>
}
<div class="breadcrumbs" typeof="BreadcrumbList" vocab="http://schema.org/">
    <span><span><a href="https://aquavietnam.com.vn/">Trang chủ</a> &gt; <span class="breadcrumb_last" aria-current="page">Yêu cầu bảo hành</span></span></span>
</div>
<div class="about-header">
    <h2>LIÊN HỆ - GÓP Ý - HỖ TRỢ KỸ THUẬT</h2>
</div>
<div class="about-image">
    <p class="p-title"><i class="fa fa-check" aria-hidden="true"></i>&nbsp;&nbsp;Liên hệ vấn đề kỹ thuật, dịch vụ </p>
    <p class="p-label"><i class="fa fa-phone-square" aria-hidden="true"></i>&nbsp;&nbsp;<strong>Hotline:</strong> 1800585832 (trong giờ hành chánh)</p>
    <p class="p-title"><i class="fa fa-check" aria-hidden="true"></i>&nbsp;&nbsp;Liên hệ các vấn đề khác</p>
    <p class="p-label"><i class="fa fa-phone" aria-hidden="true"></i>&nbsp;&nbsp;<strong>Điện thoại:</strong> 84-28 38278094- 38278095.</p>
    <p class="p-label"><i class="fa fa-fax" aria-hidden="true"></i>&nbsp;&nbsp;<strong>Fax:</strong> 84-28 38219 290</p>
    <p class="p-sub"><i class="fa fa-thumb-tack" aria-hidden="true"></i>&nbsp;&nbsp;Để yêu cầu thêm thông tin, hỗ trợ kỹ thuật hay góp ý, xin vui lòng điền vào các ô bên dưới. Chúng tôi sẽ liên lạc với bạn trong thời gian sớm nhất.</p>
</div>
<div class="row" style="width: 100%;">
    <div style="float:left; width: 100%;">
        @using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "dvResults", OnSuccess = "OnSuccess(data, status, xhr)" }))
            {
            <div class="container-form">
                <div class="dvError">
                    <p style="color:red;padding: 0;margin:0;font-size: 18px;font-weight:600;" class="lbError"></p>
                    <p style="color:forestgreen;padding: 0;margin:0;font-size: 18px;font-weight:600;" class="lbSuccess"></p>
                </div>
                <div class="dvCustomerInfo">
                    <div class="wrapper" style="padding: 6px 12px; font-size: 16px; border: 0;">
                        <div class="address">
                            <h4 style="font-weight: 600;"><i class="fa fa-tags" aria-hidden="true"></i> Thông tin khách hàng</h4>
                            <div class="row">
                                <table class="table">
                                    <tr>
                                        <td class="col-label">Tên người gửi<span class="required">*</span></td>
                                        <td>
                                            @Html.TextBoxFor(N => N.SenderName, new { @class = "form-control form-name", @placeholder = "Tên người gửi", required = "required" })
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Địa chỉ email</td>
                                        <td>
                                            @Html.TextBoxFor(N => N.SenderEmail, new { @class = "form-control form-name", @placeholder = "Nhập địa chỉ email" })
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Địa chỉ</td>
                                        <td>
                                            @Html.TextBoxFor(N => N.SenderAddress, new { @class = "form-control form-name", @placeholder = "Nhập địa chỉ" })
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Tên công ty</td>
                                        <td>
                                            @Html.TextBoxFor(N => N.SenderCoName, new { @class = "form-control form-name", @placeholder = "Nhập tên công ty" })

                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Điện thoại</td>
                                        <td>
                                            @Html.TextBoxFor(N => N.SenderPhone, new { @class = "form-control form-name", @placeholder = "Nhập điện thoại" })

                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Fax</td>
                                        <td>
                                            @Html.TextBoxFor(N => N.SenderFax, new { @class = "form-control form-name", @placeholder = "Nhập fax" })
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label" name="SupportRequestType" title="Danh mục câu hỏi">Danh mục CH<span class="required">*</span></td>
                                        <td>
                                            @Html.DropDownListFor(N => N.SupportRequestType, (IEnumerable<SelectListItem>)ViewBag.TypeSPR, new { @class = "form-control select-typeSPR" })
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dvProductInfo">
                    <div class="wrapper" style="padding: 6px 12px; font-size: 16px; border: 0;">
                        <div class="address">
                            <h4 style="font-weight: 600;"><i class="fa fa-tags" aria-hidden="true"></i> Thông tin sản phẩm</h4>
                            <div class="row">
                                <table class="table">
                                    <tr>
                                        <td class="col-label">Sản phẩm</td>
                                        <td>

                                            @Html.DropDownList("plant", (IEnumerable<SelectListItem>)ViewBag.Plants, new { @class = "form-control select-plant" })

                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Kiểu máy</td>
                                        <td>
                                            <select class="form-control select-model" name="MatID" style="width: 100%;">
                                                <option value="0">Vui lòng chọn loại sản phẩm</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Khác</td>
                                        <td>
                                            @Html.TextBoxFor(N => N.ModelOther, new { @class = "form-control form-Other", @placeholder = "Nhập ..." })

                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Nội dung<span class="required">*</span></td>
                                        <td>
                                            @Html.TextBoxFor(N => N.MessageBody, new { @class = "form-control form-name", @placeholder = "Nhập nội dung ..." })

                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-label">Mã xác nhận<span class="required">*</span></td>
                                        <td>
                                            <div style="width: 40%;float:left;max-width: 100px;">
                                                <img src="/Home/GetCaptchaImage" style="width:100%;height: 35px;border: 1px solid #ddd;" title="Captcha" />
                                            </div>
                                            <div style="width: 60%;float:right;">
                                                @Html.TextBoxFor(N => N.captcha, new { @class = "form-control form-captcha", @placeholder = "Nhập mã xác nhận..." })
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <div style="float:left; padding: 6px 0;">(<span class="required">*</span>) Bắt buộc nhập</div>
                                            <input type="submit" value="Gửi thông tin" class="btn btn-primary" style="float:right;" />
                                            <button type="button" class="btn btn-default btn-clear" style="float:right;margin-right: 5px;"><i class="fa fa-refresh" aria-hidden="true"></i> Làm mới</button>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
    @section Scripts {
        <script type="text/javascript">
            $(document).ready(function () {
                loadListModel($('.select-plant').val());
                $('.select-plant').on('change', function () {
                    loadListModel($(this).val());
                });
                $('.btn-clear').click(function () {
                    location.reload();
                });
                $('.select-typeSPR').on('change', function () {
                    setEnableByType();
                });
            });
            //thay đổi
            function setEnableByType() {
                if ($(".select-typeSPR").val() != "1") {
                    $(".select-plant").attr("disabled", true);
                    $(".select-model").attr("disabled", true);
                    $(".form-Other").attr("disabled", true);
                } else {
                    $(".select-plant").attr("disabled", false);
                    $(".select-model").attr("disabled", false);
                    $(".form-Other").attr("disabled", false);
                }
            }
            function loadListModel(plantId) {
                $.ajax({
                    type: "GET",
                    url: '@Url.Action("loadListModel", "Home")' + '?plantId=' + plantId,
                    success: function (data) {
                        var html = '';
                        $.each(data, function (key, value) {
                            html += '<option value="' + value.value + '">' + value.text + '</option>';
                        });
                        $('.select-model').html(html);
                    }, error: function (e) {
                        alert(e);
                    }, complete: function () {

                    }
                });
            }
            function OnSuccess(data, status, xhr) {
                $('.lbSuccess').html('');
                $('.lbError').html('');
                $('.form-captcha').val('');
                var unique = $.now();
                $(".imgCaptcha").attr("src", "/Home/GetCaptchaImage?" + unique);
                if (data.code == "1") {
                    $('.lbSuccess').html(data.msg);
                } else {
                    $('.lbError').html(data.msg);
                }
            }
        </script>
    }
